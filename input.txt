%%{init: { 'logLevel': 'debug', 'theme': 'dark' } }%%
erDiagram
    books |o--|{ book_borrowing_records : "book is borrowed"
    books |o--|{ book_reservation_records : "book is reserved"
    books ||--|{ bookshelves : "book is located on bookshelf"
    books {
        serial id
        varchar(16) isbn
        varchar(256) title
        varchar(128) author
        date publication_date
        integer shelf_id
    }
    journals |o--|{ journal_borrowing_records : "journal is borrowed"
    journals |o--|{ journal_reservation_records : "journal is reserved"
    journals ||--|{ bookshelves : "journal is located on bookshelf"
    journals {
        serial id
        varchar(16) issn
        varchar(256) title
        varchar(128) author
        date publication_date
        integer shelf_id
    }
    users |o--|{ book_borrowing_records : "user borrows"
    users |o--|{ journal_borrowing_records : "user borrows"
    users |o--|{ bookshelves : "user owns"
    users {
        serial id
        varchar(32) username
        varchar(128) email
        varchar(128) password
    }
    bookshelves {
        serial id
        integer owner_id
        varchar(256) location
    }
    book_borrowing_records {
        serial id
        integer user_id
        integer book_id
        timestamp borrowed
        timestamp returned
        timestamp expected_return
    }
    book_reservation_records {
        serial id
        integer user_id
        integer book_id
        timestamp reservation_start
        timestamp reservation_end
    }
    journal_borrowing_records {
        serial id
        integer user_id
        integer journal_id
        timestamp borrowed
        timestamp returned
        timestamp expected_return
    }
    journal_reservation_records {
        serial id
        integer user_id
        integer journal_id
        timestamp reservation_start
        timestamp reservation_end
    }